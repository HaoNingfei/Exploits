#!/usr/bin/perl

use strict;
use warnings;
use lib qw(MSFExploits);

use 5.10.0;
no warnings 'experimental';

use Term::ANSIColor;
use Data::Dump qw(dump);

my @files = ();
my %packages = ();


@files = `find . | grep "\.pm"`;

foreach my $file (@files) {
   chomp $file;
   my $package = '';
   ($package) = $file =~ /(MSFExploits\/.*)\.pm$/i;
   $package =~ s/\//::/gi;
   eval "use $package";
   if ($@) { 
      print color("bold yellow"), "Error While Loading Package : $package\n\t\t[File] => $file\n\t\t[Message] => " . dump($@) . "\n\n";
   } else {
      $packages{$package}->{FILE} = $file;
   }
}

foreach my $package (sort keys %packages) {
   my $file = $packages{$package}->{FILE};
   print color("bold green"), "[+] Good : $file ($package)\n";
#   my $object = $package->new() if($package->new);
   print dump($package);
}
